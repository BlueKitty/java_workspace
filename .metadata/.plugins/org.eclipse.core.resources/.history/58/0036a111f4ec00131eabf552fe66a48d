package util;

import java.io.*;
import java.util.StringTokenizer;

import Car_Config.Automotive;

public class ReadSource {
	
	public Automotive buildAutoObject(String filename){
		Automotive auto = new Automotive();
		try{
			FileReader file = new FileReader(filename);
			BufferedReader buff = new BufferedReader(file);
			String line = null;
			int OpsetCount = 0; // initial optionset count
			int OpCount = 0;
			int lineCount = 0;
			while( (line = buff.readLine()) != null){
				if(lineCount == 0){
					System.out.println(line);
					auto.setName(line);
					lineCount++;
				}else{
					StringTokenizer st = new StringTokenizer(line);
					while(st.hasMoreTokens()){
						String message1 = st.nextToken();
						if(message1.equals("OptionSet:")){
							OpsetCount++;
							String OpsetName = st.nextToken();
							int OpsetSize = Integer.parseInt(st.nextToken());
							System.out.println(OpsetName);
							System.out.println(OpsetSize);
							auto.setOpSet(OpsetCount-1, OpsetName, OpsetSize);;
							OpCount = 0; // initial option count
						}else{							
							String OpName = st.nextToken();
							float OpPrice = Float.parseFloat(st.nextToken());
							auto.setOption(auto.getOptionsetName(OpsetCount-1), OpCount, OpName, OpPrice);
							OpCount++;							
						}
					}
					lineCount++;
				}
			}
			buff.close();
		}catch (IOException e) {
			System.out.print("Error --" + e.toString());
		}
		return auto;		
	}
	

}
